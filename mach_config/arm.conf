CCPREFIX	= arm-none-eabi-

ifeq ($(MACH),stm32f1)
CC_FLAGS   = -Os -g -fno-common -ffunction-sections -fdata-sections -MD -mthumb -mcpu=cortex-m3
LD_FLAGS 	= --static -nostartfiles -Wl,--gc-sections -mthumb -mcpu=cortex-m3 -Wl,--start-group -lc -lgcc -lnosys -Wl,--end-group
endif

ifeq ($(MACH),stm32f40x)
#CC_FLAGS 	= -mcpu=cortex-m4 -Os -g -gdwarf-2 -mthumb -fomit-frame-pointer -fverbose-asm
#LD_FLAGS    = -mcpu=cortex-m4 -g -gdwarf-2 -mthumb -nostartfiles -Xlinker --gc-sections
CC_FLAGS    = -Os -g -fno-common -ffunction-sections -fdata-sections -MD -mthumb -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16
LD_FLAGS 	= --static -nostartfiles -Wl,--gc-sections -mthumb -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16 -Wl,--start-group -lc -lgcc -lnosys -Wl,--end-group 
endif
